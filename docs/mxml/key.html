<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>musx.mxml.key API documentation</title>
<meta name="description" content="The Key class represents the complete chromatic set of keys in western music." />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>musx.mxml.key</code></h1>
</header>
<section id="section-intro">
<p>The Key class represents the complete chromatic set of keys in western music.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">###############################################################################
&#34;&#34;&#34;
The Key class represents the complete chromatic set of keys in western music.
&#34;&#34;&#34;


__pdoc__ = {
    &#39;Key.__init__&#39;: True, &#39;Key.__str__&#39;: True, &#39;Key.__repr__&#39;: True
}


from ..pitch import Pitch
from .mode import Mode
from ..interval import Interval


class Key:
    &#34;&#34;&#34;
    A key consists of an integer &#39;signum&#39; representing the number of sharps or
    flats in the key&#39;s signature, and a Mode (Enum). Keys can return Pnums
    representing their tonic note and diatonic scale degrees.
    See: https://en.wikipedia.org/wiki/Key_(music)
    &#34;&#34;&#34;

    # Private map of key signature numbers (-7 to 7) to Pitch.pnums
    # representing the tonic notes of the major keys in the cycle of
    # fifths. For example, the signum -1 maps to Pitch.pnum.F, the
    # tonic of F major.
    _tonics = {i-7: v for i, v in enumerate([
        Pitch.pnums.Cf, Pitch.pnums.Gf, Pitch.pnums.Df, Pitch.pnums.Af,
        Pitch.pnums.Ef, Pitch.pnums.Bf, Pitch.pnums.F, Pitch.pnums.C,
        Pitch.pnums.G, Pitch.pnums.D, Pitch.pnums.A, Pitch.pnums.E,
        Pitch.pnums.B, Pitch.pnums.Fs, Pitch.pnums.Cs])}

    # Private map returns a transposition interval for the key&#39;s tonic
    # Pnum. Major is not included because it involves no transposition.
    _transp = {Mode.MINOR: &#39;M6&#39;, Mode.DORIAN: &#39;M2&#39;,
               Mode.PHRYGIAN: &#39;M3&#39;, Mode.LYDIAN: &#39;P4&#39;, Mode.MIXOLYDIAN: &#39;P5&#39;,
               Mode.LOCRIAN: &#39;M7&#39;}

    def __init__(self, signum, mode, staffnum):
        &#34;&#34;&#34;
        Creates a Key from an integer key signature identifier and mode.
        
        Parameters
        ----------
        signum : int
            A value -7 to 7 representing the number of flats (negative) or sharps (positive).
        mode : Mode
            A Mode enum, or its case-insensitive string name.

        Raises 
        ------
        A TypeError if signum is not an integer or if mode is not a Mode or string.&lt;br&gt;
        A ValueError if the signum integer or the mode string is invalid.
        &#34;&#34;&#34;
        if isinstance(signum, int):
            if -7 &lt;= signum &lt;= 7:
                if isinstance(mode, str):
                    m = mode
                    mode = Mode.__dict__.get(m.upper())
                    if mode is None:
                        raise ValueError(f&#34;&#39;{m}&#39; is an invalid mode name.&#34;)
                elif not isinstance(mode, Mode):
                    raise TypeError(f&#39;{signum} is not a Mode or mode name.&#39;)
            else:
                raise ValueError(f&#39;{signum} is not a key signature between -7 and 7.&#39;)
        else:
            raise TypeError(f&#39;{signum} is not a key signature between -7 and 7.&#39;)
        # The the number of flats or sharp, -7 to 7
        self.signum = signum
        # The Mode of the key.
        self.mode = mode
        # The staff number of the key (0=All)
        self.staffnum = staffnum

    def __str__(self):
        &#34;&#34;&#34;
        Returns the print representation of the key.
        &#34;&#34;&#34;
        staff = &#34;all&#34; if self.staffnum == 0 else self.staffnum
        if self.mode:
            # Force tonic pnum to display &#34;#&#34; and &#34;b&#34; as accidental.
            text = self.tonic().name
            text = text.replace(&#39;f&#39;, &#39;b&#39;) if &#39;f&#39; in text else text.replace(&#39;s&#39;, &#39;#&#39;)
            text += f&#39;-{self.mode.name.capitalize()}&#39;
        else:
            text = str(abs(self.signum)) + &#34; &#34;
            if abs(self.signum) &gt; 1: 
                text += &#34;sharps&#34; if self.signum &gt; 0 else &#34;flats&#34;
            elif self.signum == 0: 
                text += &#34;accidentals&#34;
            else: 
                text += &#34;sharp&#34; if self.signum == 1 else &#34;flat&#34;
        return f&#39;&lt;Key: {text} staff={staff}&gt;&#39; # {hex(id(self))}

    # def __repr__(self):
    #     &#34;&#34;&#34;
    #     Returns the external representation of the Key including the
    #     constructor name, signum, and the capitalized version of the
    #     mode&#39;s name.
        
    #     Examples
    #     --------
    #     &#39;Key(4, &#34;Dorian&#34;)&#39;&lt;br&gt;
    #     &#39;Key(-1, &#34;Major&#34;)&#39;
    #     &#34;&#34;&#34;
    #     return f&#39;Key({self.signum}, &#34;{self.mode.name.capitalize()}&#34;)&#39;

    # def string(self):
    #     &#34;&#34;&#34;
    #     Returns a string containing the name of the tonic Pnum, a
    #     hyphen, and the capitalized version of the mode&#39;s name.
    
    #     Examples
    #     --------
    #     &#39;Fs-Dorian&#39;,&lt;br&gt;
    #     &#39;Bf-Phrygian&#39;,&lt;br&gt;
    #     &#39;B-Major&#39;
    #     &#34;&#34;&#34;
    #     return f&#39;{self.tonic().name}-{self.mode.name.capitalize()}&#39;

    def tonic(self):
        &#34;&#34;&#34;
        Returns a Pnum representing the key&#39;s tonic. The tonic can
        be calculated by transposing the Major tonic (Pnum) by the
        interval distance of the mode above the major. The
        transposition can be performed using that interval&#39;s transpose()
        method. The interval distances of Major up to Locrian are:
        P1, M2, M3, P4, P5, M6, M7.
        
        Examples
        --------
        Key(0, &#34;lydian&#34;).tonic() is Pnum F.&lt;br&gt;
        Key(2, &#34;dorian&#34;).tonic() is Pnum E.&lt;br&gt;
        Key(-6, &#34;phrygian&#34;).tonic() is Pnum Bf.&lt;br&gt;
        &#34;&#34;&#34;
        ton = self._tonics[self.signum]
        if self.mode is Mode.MAJOR:
            return ton
        return Interval(self._transp[self.mode]).transpose(ton)

    def scale(self):
        &#34;&#34;&#34;
        Returns a list of Pnums representing the unique pitches of the key&#39;s
        diatonic scale. The octave completion should NOT be included in the list.
        &#34;&#34;&#34;
        steps = [Interval(&#39;M2&#39;), Interval(&#39;M2&#39;), Interval(&#39;m2&#39;),
                 Interval(&#39;M2&#39;), Interval(&#39;M2&#39;), Interval(&#39;M2&#39;),
                 Interval(&#39;m2&#39;)]
        start = self.mode.tonic_degree()
        order = steps[start:] + steps[:start]
        tonic = self.tonic()
        scale = [tonic]
        for s in order[:-1]:
            tonic = s.transpose(tonic)
            scale.append(tonic)
        return scale


def _test_keys():
    # for s in range(-7, 8):
    #     for m in [&#39;Major&#39;, &#39;Minor&#39;, &#34;Dorian&#34;, &#34;Phrygian&#34;, &#34;Mixolydian&#34;,
    #               &#34;Aeolian&#34;, &#34;Locrian&#34;]:
    #         print(f&#39;assert \&#39;Key({s}, &#34;{m}&#34;)\&#39;&#39;, &#34;==&#34;, f&#34;Key({s}, &#39;{m}&#39;).__repr__()&#34;)

    # for s in range(-7, 8):
    #     for m in [&#39;Major&#39;, &#39;Minor&#39;, &#34;Dorian&#34;, &#34;Phrygian&#34;, &#34;Mixolydian&#34;,
    #               &#34;Aeolian&#34;, &#34;Locrian&#34;]:
    #         print(f&#34;assert &#39;{Key(s, m).tonic().name}&#39;&#34;, &#34;==&#34;, f&#34;Key({s}, &#39;{m}&#39;).tonic().name&#34;)

    # for s in range(-7, 8):
    #     for m in [&#39;Major&#39;, &#39;Minor&#39;, &#34;Dorian&#34;, &#34;Phrygian&#34;, &#34;Mixolydian&#34;,
    #               &#34;Aeolian&#34;, &#34;Locrian&#34;]:
    #         print(f&#34;assert &#39;{Key(s, m).scale()[-1].name}&#39;&#34;, &#34;==&#34;, f&#34;Key({s}, &#39;{m}&#39;).scale()[-1].name&#34;)

    print(&#39;Testing key.py ... &#39;, end=&#39;&#39;)
    assert &#39;Key(-7, &#34;Major&#34;)&#39; == Key(-7, &#39;Major&#39;).__repr__()
    assert &#39;Key(-7, &#34;Minor&#34;)&#39; == Key(-7, &#39;Minor&#39;).__repr__()
    assert &#39;Key(-7, &#34;Dorian&#34;)&#39; == Key(-7, &#39;Dorian&#39;).__repr__()
    assert &#39;Key(-7, &#34;Phrygian&#34;)&#39; == Key(-7, &#39;Phrygian&#39;).__repr__()
    assert &#39;Key(-7, &#34;Mixolydian&#34;)&#39; == Key(-7, &#39;Mixolydian&#39;).__repr__()
    assert &#39;Key(-7, &#34;Minor&#34;)&#39; == Key(-7, &#39;Aeolian&#39;).__repr__()
    assert &#39;Key(-7, &#34;Locrian&#34;)&#39; == Key(-7, &#39;Locrian&#39;).__repr__()
    assert &#39;Key(-6, &#34;Major&#34;)&#39; == Key(-6, &#39;Major&#39;).__repr__()
    assert &#39;Key(-6, &#34;Minor&#34;)&#39; == Key(-6, &#39;Minor&#39;).__repr__()
    assert &#39;Key(-6, &#34;Dorian&#34;)&#39; == Key(-6, &#39;Dorian&#39;).__repr__()
    assert &#39;Key(-6, &#34;Phrygian&#34;)&#39; == Key(-6, &#39;Phrygian&#39;).__repr__()
    assert &#39;Key(-6, &#34;Mixolydian&#34;)&#39; == Key(-6, &#39;Mixolydian&#39;).__repr__()
    assert &#39;Key(-6, &#34;Minor&#34;)&#39; == Key(-6, &#39;Aeolian&#39;).__repr__()
    assert &#39;Key(-6, &#34;Locrian&#34;)&#39; == Key(-6, &#39;Locrian&#39;).__repr__()
    assert &#39;Key(-5, &#34;Major&#34;)&#39; == Key(-5, &#39;Major&#39;).__repr__()
    assert &#39;Key(-5, &#34;Minor&#34;)&#39; == Key(-5, &#39;Minor&#39;).__repr__()
    assert &#39;Key(-5, &#34;Dorian&#34;)&#39; == Key(-5, &#39;Dorian&#39;).__repr__()
    assert &#39;Key(-5, &#34;Phrygian&#34;)&#39; == Key(-5, &#39;Phrygian&#39;).__repr__()
    assert &#39;Key(-5, &#34;Mixolydian&#34;)&#39; == Key(-5, &#39;Mixolydian&#39;).__repr__()
    assert &#39;Key(-5, &#34;Minor&#34;)&#39; == Key(-5, &#39;Aeolian&#39;).__repr__()
    assert &#39;Key(-5, &#34;Locrian&#34;)&#39; == Key(-5, &#39;Locrian&#39;).__repr__()
    assert &#39;Key(-4, &#34;Major&#34;)&#39; == Key(-4, &#39;Major&#39;).__repr__()
    assert &#39;Key(-4, &#34;Minor&#34;)&#39; == Key(-4, &#39;Minor&#39;).__repr__()
    assert &#39;Key(-4, &#34;Dorian&#34;)&#39; == Key(-4, &#39;Dorian&#39;).__repr__()
    assert &#39;Key(-4, &#34;Phrygian&#34;)&#39; == Key(-4, &#39;Phrygian&#39;).__repr__()
    assert &#39;Key(-4, &#34;Mixolydian&#34;)&#39; == Key(-4, &#39;Mixolydian&#39;).__repr__()
    assert &#39;Key(-4, &#34;Minor&#34;)&#39; == Key(-4, &#39;Aeolian&#39;).__repr__()
    assert &#39;Key(-4, &#34;Locrian&#34;)&#39; == Key(-4, &#39;Locrian&#39;).__repr__()
    assert &#39;Key(-3, &#34;Major&#34;)&#39; == Key(-3, &#39;Major&#39;).__repr__()
    assert &#39;Key(-3, &#34;Minor&#34;)&#39; == Key(-3, &#39;Minor&#39;).__repr__()
    assert &#39;Key(-3, &#34;Dorian&#34;)&#39; == Key(-3, &#39;Dorian&#39;).__repr__()
    assert &#39;Key(-3, &#34;Phrygian&#34;)&#39; == Key(-3, &#39;Phrygian&#39;).__repr__()
    assert &#39;Key(-3, &#34;Mixolydian&#34;)&#39; == Key(-3, &#39;Mixolydian&#39;).__repr__()
    assert &#39;Key(-3, &#34;Minor&#34;)&#39; == Key(-3, &#39;Aeolian&#39;).__repr__()
    assert &#39;Key(-3, &#34;Locrian&#34;)&#39; == Key(-3, &#39;Locrian&#39;).__repr__()
    assert &#39;Key(-2, &#34;Major&#34;)&#39; == Key(-2, &#39;Major&#39;).__repr__()
    assert &#39;Key(-2, &#34;Minor&#34;)&#39; == Key(-2, &#39;Minor&#39;).__repr__()
    assert &#39;Key(-2, &#34;Dorian&#34;)&#39; == Key(-2, &#39;Dorian&#39;).__repr__()
    assert &#39;Key(-2, &#34;Phrygian&#34;)&#39; == Key(-2, &#39;Phrygian&#39;).__repr__()
    assert &#39;Key(-2, &#34;Mixolydian&#34;)&#39; == Key(-2, &#39;Mixolydian&#39;).__repr__()
    assert &#39;Key(-2, &#34;Minor&#34;)&#39; == Key(-2, &#39;Aeolian&#39;).__repr__()
    assert &#39;Key(-2, &#34;Locrian&#34;)&#39; == Key(-2, &#39;Locrian&#39;).__repr__()
    assert &#39;Key(-1, &#34;Major&#34;)&#39; == Key(-1, &#39;Major&#39;).__repr__()
    assert &#39;Key(-1, &#34;Minor&#34;)&#39; == Key(-1, &#39;Minor&#39;).__repr__()
    assert &#39;Key(-1, &#34;Dorian&#34;)&#39; == Key(-1, &#39;Dorian&#39;).__repr__()
    assert &#39;Key(-1, &#34;Phrygian&#34;)&#39; == Key(-1, &#39;Phrygian&#39;).__repr__()
    assert &#39;Key(-1, &#34;Mixolydian&#34;)&#39; == Key(-1, &#39;Mixolydian&#39;).__repr__()
    assert &#39;Key(-1, &#34;Minor&#34;)&#39; == Key(-1, &#39;Aeolian&#39;).__repr__()
    assert &#39;Key(-1, &#34;Locrian&#34;)&#39; == Key(-1, &#39;Locrian&#39;).__repr__()
    assert &#39;Key(0, &#34;Major&#34;)&#39; == Key(0, &#39;Major&#39;).__repr__()
    assert &#39;Key(0, &#34;Minor&#34;)&#39; == Key(0, &#39;Minor&#39;).__repr__()
    assert &#39;Key(0, &#34;Dorian&#34;)&#39; == Key(0, &#39;Dorian&#39;).__repr__()
    assert &#39;Key(0, &#34;Phrygian&#34;)&#39; == Key(0, &#39;Phrygian&#39;).__repr__()
    assert &#39;Key(0, &#34;Mixolydian&#34;)&#39; == Key(0, &#39;Mixolydian&#39;).__repr__()
    assert &#39;Key(0, &#34;Minor&#34;)&#39; == Key(0, &#39;Aeolian&#39;).__repr__()
    assert &#39;Key(0, &#34;Locrian&#34;)&#39; == Key(0, &#39;Locrian&#39;).__repr__()
    assert &#39;Key(1, &#34;Major&#34;)&#39; == Key(1, &#39;Major&#39;).__repr__()
    assert &#39;Key(1, &#34;Minor&#34;)&#39; == Key(1, &#39;Minor&#39;).__repr__()
    assert &#39;Key(1, &#34;Dorian&#34;)&#39; == Key(1, &#39;Dorian&#39;).__repr__()
    assert &#39;Key(1, &#34;Phrygian&#34;)&#39; == Key(1, &#39;Phrygian&#39;).__repr__()
    assert &#39;Key(1, &#34;Mixolydian&#34;)&#39; == Key(1, &#39;Mixolydian&#39;).__repr__()
    assert &#39;Key(1, &#34;Minor&#34;)&#39; == Key(1, &#39;Aeolian&#39;).__repr__()
    assert &#39;Key(1, &#34;Locrian&#34;)&#39; == Key(1, &#39;Locrian&#39;).__repr__()
    assert &#39;Key(2, &#34;Major&#34;)&#39; == Key(2, &#39;Major&#39;).__repr__()
    assert &#39;Key(2, &#34;Minor&#34;)&#39; == Key(2, &#39;Minor&#39;).__repr__()
    assert &#39;Key(2, &#34;Dorian&#34;)&#39; == Key(2, &#39;Dorian&#39;).__repr__()
    assert &#39;Key(2, &#34;Phrygian&#34;)&#39; == Key(2, &#39;Phrygian&#39;).__repr__()
    assert &#39;Key(2, &#34;Mixolydian&#34;)&#39; == Key(2, &#39;Mixolydian&#39;).__repr__()
    assert &#39;Key(2, &#34;Minor&#34;)&#39; == Key(2, &#39;Aeolian&#39;).__repr__()
    assert &#39;Key(2, &#34;Locrian&#34;)&#39; == Key(2, &#39;Locrian&#39;).__repr__()
    assert &#39;Key(3, &#34;Major&#34;)&#39; == Key(3, &#39;Major&#39;).__repr__()
    assert &#39;Key(3, &#34;Minor&#34;)&#39; == Key(3, &#39;Minor&#39;).__repr__()
    assert &#39;Key(3, &#34;Dorian&#34;)&#39; == Key(3, &#39;Dorian&#39;).__repr__()
    assert &#39;Key(3, &#34;Phrygian&#34;)&#39; == Key(3, &#39;Phrygian&#39;).__repr__()
    assert &#39;Key(3, &#34;Mixolydian&#34;)&#39; == Key(3, &#39;Mixolydian&#39;).__repr__()
    assert &#39;Key(3, &#34;Minor&#34;)&#39; == Key(3, &#39;Aeolian&#39;).__repr__()
    assert &#39;Key(3, &#34;Locrian&#34;)&#39; == Key(3, &#39;Locrian&#39;).__repr__()
    assert &#39;Key(4, &#34;Major&#34;)&#39; == Key(4, &#39;Major&#39;).__repr__()
    assert &#39;Key(4, &#34;Minor&#34;)&#39; == Key(4, &#39;Minor&#39;).__repr__()
    assert &#39;Key(4, &#34;Dorian&#34;)&#39; == Key(4, &#39;Dorian&#39;).__repr__()
    assert &#39;Key(4, &#34;Phrygian&#34;)&#39; == Key(4, &#39;Phrygian&#39;).__repr__()
    assert &#39;Key(4, &#34;Mixolydian&#34;)&#39; == Key(4, &#39;Mixolydian&#39;).__repr__()
    assert &#39;Key(4, &#34;Minor&#34;)&#39; == Key(4, &#39;Minor&#39;).__repr__()
    assert &#39;Key(4, &#34;Locrian&#34;)&#39; == Key(4, &#39;Locrian&#39;).__repr__()
    assert &#39;Key(5, &#34;Major&#34;)&#39; == Key(5, &#39;Major&#39;).__repr__()
    assert &#39;Key(5, &#34;Minor&#34;)&#39; == Key(5, &#39;Minor&#39;).__repr__()
    assert &#39;Key(5, &#34;Dorian&#34;)&#39; == Key(5, &#39;Dorian&#39;).__repr__()
    assert &#39;Key(5, &#34;Phrygian&#34;)&#39; == Key(5, &#39;Phrygian&#39;).__repr__()
    assert &#39;Key(5, &#34;Mixolydian&#34;)&#39; == Key(5, &#39;Mixolydian&#39;).__repr__()
    assert &#39;Key(5, &#34;Minor&#34;)&#39; == Key(5, &#39;Minor&#39;).__repr__()
    assert &#39;Key(5, &#34;Locrian&#34;)&#39; == Key(5, &#39;Locrian&#39;).__repr__()
    assert &#39;Key(6, &#34;Major&#34;)&#39; == Key(6, &#39;Major&#39;).__repr__()
    assert &#39;Key(6, &#34;Minor&#34;)&#39; == Key(6, &#39;Minor&#39;).__repr__()
    assert &#39;Key(6, &#34;Dorian&#34;)&#39; == Key(6, &#39;Dorian&#39;).__repr__()
    assert &#39;Key(6, &#34;Phrygian&#34;)&#39; == Key(6, &#39;Phrygian&#39;).__repr__()
    assert &#39;Key(6, &#34;Mixolydian&#34;)&#39; == Key(6, &#39;Mixolydian&#39;).__repr__()
    assert &#39;Key(6, &#34;Minor&#34;)&#39; == Key(6, &#39;Aeolian&#39;).__repr__()
    assert &#39;Key(6, &#34;Locrian&#34;)&#39; == Key(6, &#39;Locrian&#39;).__repr__()
    assert &#39;Key(7, &#34;Major&#34;)&#39; == Key(7, &#39;Major&#39;).__repr__()
    assert &#39;Key(7, &#34;Minor&#34;)&#39; == Key(7, &#39;Minor&#39;).__repr__()
    assert &#39;Key(7, &#34;Dorian&#34;)&#39; == Key(7, &#39;Dorian&#39;).__repr__()
    assert &#39;Key(7, &#34;Phrygian&#34;)&#39; == Key(7, &#39;Phrygian&#39;).__repr__()
    assert &#39;Key(7, &#34;Mixolydian&#34;)&#39; == Key(7, &#39;Mixolydian&#39;).__repr__()
    assert &#39;Key(7, &#34;Minor&#34;)&#39; == Key(7, &#39;Aeolian&#39;).__repr__()
    assert &#39;Key(7, &#34;Locrian&#34;)&#39; == Key(7, &#39;Locrian&#39;).__repr__()

    assert &#39;Cf&#39; == Key(-7, &#39;Major&#39;).tonic().name
    assert &#39;Af&#39; == Key(-7, &#39;Minor&#39;).tonic().name
    assert &#39;Df&#39; == Key(-7, &#39;Dorian&#39;).tonic().name
    assert &#39;Ef&#39; == Key(-7, &#39;Phrygian&#39;).tonic().name
    assert &#39;Gf&#39; == Key(-7, &#39;Mixolydian&#39;).tonic().name
    assert &#39;Af&#39; == Key(-7, &#39;Aeolian&#39;).tonic().name
    assert &#39;Bf&#39; == Key(-7, &#39;Locrian&#39;).tonic().name
    assert &#39;Gf&#39; == Key(-6, &#39;Major&#39;).tonic().name
    assert &#39;Ef&#39; == Key(-6, &#39;Minor&#39;).tonic().name
    assert &#39;Af&#39; == Key(-6, &#39;Dorian&#39;).tonic().name
    assert &#39;Bf&#39; == Key(-6, &#39;Phrygian&#39;).tonic().name
    assert &#39;Df&#39; == Key(-6, &#39;Mixolydian&#39;).tonic().name
    assert &#39;Ef&#39; == Key(-6, &#39;Aeolian&#39;).tonic().name
    assert &#39;F&#39; == Key(-6, &#39;Locrian&#39;).tonic().name
    assert &#39;Df&#39; == Key(-5, &#39;Major&#39;).tonic().name
    assert &#39;Bf&#39; == Key(-5, &#39;Minor&#39;).tonic().name
    assert &#39;Ef&#39; == Key(-5, &#39;Dorian&#39;).tonic().name
    assert &#39;F&#39; == Key(-5, &#39;Phrygian&#39;).tonic().name
    assert &#39;Af&#39; == Key(-5, &#39;Mixolydian&#39;).tonic().name
    assert &#39;Bf&#39; == Key(-5, &#39;Aeolian&#39;).tonic().name
    assert &#39;C&#39; == Key(-5, &#39;Locrian&#39;).tonic().name
    assert &#39;Af&#39; == Key(-4, &#39;Major&#39;).tonic().name
    assert &#39;F&#39; == Key(-4, &#39;Minor&#39;).tonic().name
    assert &#39;Bf&#39; == Key(-4, &#39;Dorian&#39;).tonic().name
    assert &#39;C&#39; == Key(-4, &#39;Phrygian&#39;).tonic().name
    assert &#39;Ef&#39; == Key(-4, &#39;Mixolydian&#39;).tonic().name
    assert &#39;F&#39; == Key(-4, &#39;Aeolian&#39;).tonic().name
    assert &#39;G&#39; == Key(-4, &#39;Locrian&#39;).tonic().name
    assert &#39;Ef&#39; == Key(-3, &#39;Major&#39;).tonic().name
    assert &#39;C&#39; == Key(-3, &#39;Minor&#39;).tonic().name
    assert &#39;F&#39; == Key(-3, &#39;Dorian&#39;).tonic().name
    assert &#39;G&#39; == Key(-3, &#39;Phrygian&#39;).tonic().name
    assert &#39;Bf&#39; == Key(-3, &#39;Mixolydian&#39;).tonic().name
    assert &#39;C&#39; == Key(-3, &#39;Aeolian&#39;).tonic().name
    assert &#39;D&#39; == Key(-3, &#39;Locrian&#39;).tonic().name
    assert &#39;Bf&#39; == Key(-2, &#39;Major&#39;).tonic().name
    assert &#39;G&#39; == Key(-2, &#39;Minor&#39;).tonic().name
    assert &#39;C&#39; == Key(-2, &#39;Dorian&#39;).tonic().name
    assert &#39;D&#39; == Key(-2, &#39;Phrygian&#39;).tonic().name
    assert &#39;F&#39; == Key(-2, &#39;Mixolydian&#39;).tonic().name
    assert &#39;G&#39; == Key(-2, &#39;Aeolian&#39;).tonic().name
    assert &#39;A&#39; == Key(-2, &#39;Locrian&#39;).tonic().name
    assert &#39;F&#39; == Key(-1, &#39;Major&#39;).tonic().name
    assert &#39;D&#39; == Key(-1, &#39;Minor&#39;).tonic().name
    assert &#39;G&#39; == Key(-1, &#39;Dorian&#39;).tonic().name
    assert &#39;A&#39; == Key(-1, &#39;Phrygian&#39;).tonic().name
    assert &#39;C&#39; == Key(-1, &#39;Mixolydian&#39;).tonic().name
    assert &#39;D&#39; == Key(-1, &#39;Aeolian&#39;).tonic().name
    assert &#39;E&#39; == Key(-1, &#39;Locrian&#39;).tonic().name
    assert &#39;C&#39; == Key(0, &#39;Major&#39;).tonic().name
    assert &#39;A&#39; == Key(0, &#39;Minor&#39;).tonic().name
    assert &#39;D&#39; == Key(0, &#39;Dorian&#39;).tonic().name
    assert &#39;E&#39; == Key(0, &#39;Phrygian&#39;).tonic().name
    assert &#39;G&#39; == Key(0, &#39;Mixolydian&#39;).tonic().name
    assert &#39;A&#39; == Key(0, &#39;Aeolian&#39;).tonic().name
    assert &#39;B&#39; == Key(0, &#39;Locrian&#39;).tonic().name
    assert &#39;G&#39; == Key(1, &#39;Major&#39;).tonic().name
    assert &#39;E&#39; == Key(1, &#39;Minor&#39;).tonic().name
    assert &#39;A&#39; == Key(1, &#39;Dorian&#39;).tonic().name
    assert &#39;B&#39; == Key(1, &#39;Phrygian&#39;).tonic().name
    assert &#39;D&#39; == Key(1, &#39;Mixolydian&#39;).tonic().name
    assert &#39;E&#39; == Key(1, &#39;Aeolian&#39;).tonic().name
    assert &#39;Fs&#39; == Key(1, &#39;Locrian&#39;).tonic().name
    assert &#39;D&#39; == Key(2, &#39;Major&#39;).tonic().name
    assert &#39;B&#39; == Key(2, &#39;Minor&#39;).tonic().name
    assert &#39;E&#39; == Key(2, &#39;Dorian&#39;).tonic().name
    assert &#39;Fs&#39; == Key(2, &#39;Phrygian&#39;).tonic().name
    assert &#39;A&#39; == Key(2, &#39;Mixolydian&#39;).tonic().name
    assert &#39;B&#39; == Key(2, &#39;Aeolian&#39;).tonic().name
    assert &#39;Cs&#39; == Key(2, &#39;Locrian&#39;).tonic().name
    assert &#39;A&#39; == Key(3, &#39;Major&#39;).tonic().name
    assert &#39;Fs&#39; == Key(3, &#39;Minor&#39;).tonic().name
    assert &#39;B&#39; == Key(3, &#39;Dorian&#39;).tonic().name
    assert &#39;Cs&#39; == Key(3, &#39;Phrygian&#39;).tonic().name
    assert &#39;E&#39; == Key(3, &#39;Mixolydian&#39;).tonic().name
    assert &#39;Fs&#39; == Key(3, &#39;Aeolian&#39;).tonic().name
    assert &#39;Gs&#39; == Key(3, &#39;Locrian&#39;).tonic().name
    assert &#39;E&#39; == Key(4, &#39;Major&#39;).tonic().name
    assert &#39;Cs&#39; == Key(4, &#39;Minor&#39;).tonic().name
    assert &#39;Fs&#39; == Key(4, &#39;Dorian&#39;).tonic().name
    assert &#39;Gs&#39; == Key(4, &#39;Phrygian&#39;).tonic().name
    assert &#39;B&#39; == Key(4, &#39;Mixolydian&#39;).tonic().name
    assert &#39;Cs&#39; == Key(4, &#39;Aeolian&#39;).tonic().name
    assert &#39;Ds&#39; == Key(4, &#39;Locrian&#39;).tonic().name
    assert &#39;B&#39; == Key(5, &#39;Major&#39;).tonic().name
    assert &#39;Gs&#39; == Key(5, &#39;Minor&#39;).tonic().name
    assert &#39;Cs&#39; == Key(5, &#39;Dorian&#39;).tonic().name
    assert &#39;Ds&#39; == Key(5, &#39;Phrygian&#39;).tonic().name
    assert &#39;Fs&#39; == Key(5, &#39;Mixolydian&#39;).tonic().name
    assert &#39;Gs&#39; == Key(5, &#39;Aeolian&#39;).tonic().name
    assert &#39;As&#39; == Key(5, &#39;Locrian&#39;).tonic().name
    assert &#39;Fs&#39; == Key(6, &#39;Major&#39;).tonic().name
    assert &#39;Ds&#39; == Key(6, &#39;Minor&#39;).tonic().name
    assert &#39;Gs&#39; == Key(6, &#39;Dorian&#39;).tonic().name
    assert &#39;As&#39; == Key(6, &#39;Phrygian&#39;).tonic().name
    assert &#39;Cs&#39; == Key(6, &#39;Mixolydian&#39;).tonic().name
    assert &#39;Ds&#39; == Key(6, &#39;Aeolian&#39;).tonic().name
    assert &#39;Es&#39; == Key(6, &#39;Locrian&#39;).tonic().name
    assert &#39;Cs&#39; == Key(7, &#39;Major&#39;).tonic().name
    assert &#39;As&#39; == Key(7, &#39;Minor&#39;).tonic().name
    assert &#39;Ds&#39; == Key(7, &#39;Dorian&#39;).tonic().name
    assert &#39;Es&#39; == Key(7, &#39;Phrygian&#39;).tonic().name
    assert &#39;Gs&#39; == Key(7, &#39;Mixolydian&#39;).tonic().name
    assert &#39;As&#39; == Key(7, &#39;Aeolian&#39;).tonic().name
    assert &#39;Bs&#39; == Key(7, &#39;Locrian&#39;).tonic().name

    assert &#39;Bf&#39; == Key(-7, &#39;Major&#39;).scale()[-1].name
    assert &#39;Gf&#39; == Key(-7, &#39;Minor&#39;).scale()[-1].name
    assert &#39;Cf&#39; == Key(-7, &#39;Dorian&#39;).scale()[-1].name
    assert &#39;Df&#39; == Key(-7, &#39;Phrygian&#39;).scale()[-1].name
    assert &#39;Ff&#39; == Key(-7, &#39;Mixolydian&#39;).scale()[-1].name
    assert &#39;Gf&#39; == Key(-7, &#39;Aeolian&#39;).scale()[-1].name
    assert &#39;Af&#39; == Key(-7, &#39;Locrian&#39;).scale()[-1].name
    assert &#39;F&#39; == Key(-6, &#39;Major&#39;).scale()[-1].name
    assert &#39;Df&#39; == Key(-6, &#39;Minor&#39;).scale()[-1].name
    assert &#39;Gf&#39; == Key(-6, &#39;Dorian&#39;).scale()[-1].name
    assert &#39;Af&#39; == Key(-6, &#39;Phrygian&#39;).scale()[-1].name
    assert &#39;Cf&#39; == Key(-6, &#39;Mixolydian&#39;).scale()[-1].name
    assert &#39;Df&#39; == Key(-6, &#39;Aeolian&#39;).scale()[-1].name
    assert &#39;Ef&#39; == Key(-6, &#39;Locrian&#39;).scale()[-1].name
    assert &#39;C&#39; == Key(-5, &#39;Major&#39;).scale()[-1].name
    assert &#39;Af&#39; == Key(-5, &#39;Minor&#39;).scale()[-1].name
    assert &#39;Df&#39; == Key(-5, &#39;Dorian&#39;).scale()[-1].name
    assert &#39;Ef&#39; == Key(-5, &#39;Phrygian&#39;).scale()[-1].name
    assert &#39;Gf&#39; == Key(-5, &#39;Mixolydian&#39;).scale()[-1].name
    assert &#39;Af&#39; == Key(-5, &#39;Aeolian&#39;).scale()[-1].name
    assert &#39;Bf&#39; == Key(-5, &#39;Locrian&#39;).scale()[-1].name
    assert &#39;G&#39; == Key(-4, &#39;Major&#39;).scale()[-1].name
    assert &#39;Ef&#39; == Key(-4, &#39;Minor&#39;).scale()[-1].name
    assert &#39;Af&#39; == Key(-4, &#39;Dorian&#39;).scale()[-1].name
    assert &#39;Bf&#39; == Key(-4, &#39;Phrygian&#39;).scale()[-1].name
    assert &#39;Df&#39; == Key(-4, &#39;Mixolydian&#39;).scale()[-1].name
    assert &#39;Ef&#39; == Key(-4, &#39;Aeolian&#39;).scale()[-1].name
    assert &#39;F&#39; == Key(-4, &#39;Locrian&#39;).scale()[-1].name
    assert &#39;D&#39; == Key(-3, &#39;Major&#39;).scale()[-1].name
    assert &#39;Bf&#39; == Key(-3, &#39;Minor&#39;).scale()[-1].name
    assert &#39;Ef&#39; == Key(-3, &#39;Dorian&#39;).scale()[-1].name
    assert &#39;F&#39; == Key(-3, &#39;Phrygian&#39;).scale()[-1].name
    assert &#39;Af&#39; == Key(-3, &#39;Mixolydian&#39;).scale()[-1].name
    assert &#39;Bf&#39; == Key(-3, &#39;Aeolian&#39;).scale()[-1].name
    assert &#39;C&#39; == Key(-3, &#39;Locrian&#39;).scale()[-1].name
    assert &#39;A&#39; == Key(-2, &#39;Major&#39;).scale()[-1].name
    assert &#39;F&#39; == Key(-2, &#39;Minor&#39;).scale()[-1].name
    assert &#39;Bf&#39; == Key(-2, &#39;Dorian&#39;).scale()[-1].name
    assert &#39;C&#39; == Key(-2, &#39;Phrygian&#39;).scale()[-1].name
    assert &#39;Ef&#39; == Key(-2, &#39;Mixolydian&#39;).scale()[-1].name
    assert &#39;F&#39; == Key(-2, &#39;Aeolian&#39;).scale()[-1].name
    assert &#39;G&#39; == Key(-2, &#39;Locrian&#39;).scale()[-1].name
    assert &#39;E&#39; == Key(-1, &#39;Major&#39;).scale()[-1].name
    assert &#39;C&#39; == Key(-1, &#39;Minor&#39;).scale()[-1].name
    assert &#39;F&#39; == Key(-1, &#39;Dorian&#39;).scale()[-1].name
    assert &#39;G&#39; == Key(-1, &#39;Phrygian&#39;).scale()[-1].name
    assert &#39;Bf&#39; == Key(-1, &#39;Mixolydian&#39;).scale()[-1].name
    assert &#39;C&#39; == Key(-1, &#39;Aeolian&#39;).scale()[-1].name
    assert &#39;D&#39; == Key(-1, &#39;Locrian&#39;).scale()[-1].name
    assert &#39;B&#39; == Key(0, &#39;Major&#39;).scale()[-1].name
    assert &#39;G&#39; == Key(0, &#39;Minor&#39;).scale()[-1].name
    assert &#39;C&#39; == Key(0, &#39;Dorian&#39;).scale()[-1].name
    assert &#39;D&#39; == Key(0, &#39;Phrygian&#39;).scale()[-1].name
    assert &#39;F&#39; == Key(0, &#39;Mixolydian&#39;).scale()[-1].name
    assert &#39;G&#39; == Key(0, &#39;Aeolian&#39;).scale()[-1].name
    assert &#39;A&#39; == Key(0, &#39;Locrian&#39;).scale()[-1].name
    assert &#39;Fs&#39; == Key(1, &#39;Major&#39;).scale()[-1].name
    assert &#39;D&#39; == Key(1, &#39;Minor&#39;).scale()[-1].name
    assert &#39;G&#39; == Key(1, &#39;Dorian&#39;).scale()[-1].name
    assert &#39;A&#39; == Key(1, &#39;Phrygian&#39;).scale()[-1].name
    assert &#39;C&#39; == Key(1, &#39;Mixolydian&#39;).scale()[-1].name
    assert &#39;D&#39; == Key(1, &#39;Aeolian&#39;).scale()[-1].name
    assert &#39;E&#39; == Key(1, &#39;Locrian&#39;).scale()[-1].name
    assert &#39;Cs&#39; == Key(2, &#39;Major&#39;).scale()[-1].name
    assert &#39;A&#39; == Key(2, &#39;Minor&#39;).scale()[-1].name
    assert &#39;D&#39; == Key(2, &#39;Dorian&#39;).scale()[-1].name
    assert &#39;E&#39; == Key(2, &#39;Phrygian&#39;).scale()[-1].name
    assert &#39;G&#39; == Key(2, &#39;Mixolydian&#39;).scale()[-1].name
    assert &#39;A&#39; == Key(2, &#39;Aeolian&#39;).scale()[-1].name
    assert &#39;B&#39; == Key(2, &#39;Locrian&#39;).scale()[-1].name
    assert &#39;Gs&#39; == Key(3, &#39;Major&#39;).scale()[-1].name
    assert &#39;E&#39; == Key(3, &#39;Minor&#39;).scale()[-1].name
    assert &#39;A&#39; == Key(3, &#39;Dorian&#39;).scale()[-1].name
    assert &#39;B&#39; == Key(3, &#39;Phrygian&#39;).scale()[-1].name
    assert &#39;D&#39; == Key(3, &#39;Mixolydian&#39;).scale()[-1].name
    assert &#39;E&#39; == Key(3, &#39;Aeolian&#39;).scale()[-1].name
    assert &#39;Fs&#39; == Key(3, &#39;Locrian&#39;).scale()[-1].name
    assert &#39;Ds&#39; == Key(4, &#39;Major&#39;).scale()[-1].name
    assert &#39;B&#39; == Key(4, &#39;Minor&#39;).scale()[-1].name
    assert &#39;E&#39; == Key(4, &#39;Dorian&#39;).scale()[-1].name
    assert &#39;Fs&#39; == Key(4, &#39;Phrygian&#39;).scale()[-1].name
    assert &#39;A&#39; == Key(4, &#39;Mixolydian&#39;).scale()[-1].name
    assert &#39;B&#39; == Key(4, &#39;Aeolian&#39;).scale()[-1].name
    assert &#39;Cs&#39; == Key(4, &#39;Locrian&#39;).scale()[-1].name
    assert &#39;As&#39; == Key(5, &#39;Major&#39;).scale()[-1].name
    assert &#39;Fs&#39; == Key(5, &#39;Minor&#39;).scale()[-1].name
    assert &#39;B&#39; == Key(5, &#39;Dorian&#39;).scale()[-1].name
    assert &#39;Cs&#39; == Key(5, &#39;Phrygian&#39;).scale()[-1].name
    assert &#39;E&#39; == Key(5, &#39;Mixolydian&#39;).scale()[-1].name
    assert &#39;Fs&#39; == Key(5, &#39;Aeolian&#39;).scale()[-1].name
    assert &#39;Gs&#39; == Key(5, &#39;Locrian&#39;).scale()[-1].name
    assert &#39;Es&#39; == Key(6, &#39;Major&#39;).scale()[-1].name
    assert &#39;Cs&#39; == Key(6, &#39;Minor&#39;).scale()[-1].name
    assert &#39;Fs&#39; == Key(6, &#39;Dorian&#39;).scale()[-1].name
    assert &#39;Gs&#39; == Key(6, &#39;Phrygian&#39;).scale()[-1].name
    assert &#39;B&#39; == Key(6, &#39;Mixolydian&#39;).scale()[-1].name
    assert &#39;Cs&#39; == Key(6, &#39;Aeolian&#39;).scale()[-1].name
    assert &#39;Ds&#39; == Key(6, &#39;Locrian&#39;).scale()[-1].name
    assert &#39;Bs&#39; == Key(7, &#39;Major&#39;).scale()[-1].name
    assert &#39;Gs&#39; == Key(7, &#39;Minor&#39;).scale()[-1].name
    assert &#39;Cs&#39; == Key(7, &#39;Dorian&#39;).scale()[-1].name
    assert &#39;Ds&#39; == Key(7, &#39;Phrygian&#39;).scale()[-1].name
    assert &#39;Fs&#39; == Key(7, &#39;Mixolydian&#39;).scale()[-1].name
    assert &#39;Gs&#39; == Key(7, &#39;Aeolian&#39;).scale()[-1].name
    assert &#39;As&#39; == Key(7, &#39;Locrian&#39;).scale()[-1].name

    # ERRORS
    msg1, msg2 = &#34;Received wrong type of exception.&#34;, \
                 &#34;Expected exception did not happen.&#34;

    # TYPE ERRORS
    err = TypeError

    try: Key(1.0, &#34;major&#34;)
    except err: pass
    except: assert False, msg1
    else: assert False, msg2

    try: Key(0, .4)
    except err: pass
    except: assert False, msg1
    else: assert False, msg2

    # TYPE ERRORS
    err = ValueError

    try: Key(-7, &#34;foo&#34;)
    except err: pass
    except: assert False, msg1
    else: assert False, msg2

    try:  Key(-7, &#34;&#34;)
    except err: pass
    except: assert False, msg1
    else: assert False, msg2

    try: Key(-8, &#34;lydian&#34;)
    except err: pass
    except: assert False, msg1
    else: assert False, msg2

    try: Key(10, &#34;major&#34;)
    except err: pass
    except: assert False, msg1
    else: assert False, msg2

    try: Key(0, &#34; major &#34;)
    except err: pass
    except: assert False, msg1
    else: assert False, msg2

    print(&#39;Done!&#39;)


if __name__ == &#39;__main__&#39;:
    _test_keys()</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="musx.mxml.key.Key"><code class="flex name class">
<span>class <span class="ident">Key</span></span>
</code></dt>
<dd>
<div class="desc"><p>A key consists of an integer 'signum' representing the number of sharps or
flats in the key's signature, and a Mode (Enum). Keys can return Pnums
representing their tonic note and diatonic scale degrees.
See: <a href="https://en.wikipedia.org/wiki/Key_(music)">https://en.wikipedia.org/wiki/Key_(music)</a></p>
<p>Creates a Key from an integer key signature identifier and mode.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>signum</code></strong> :&ensp;<code>int</code></dt>
<dd>A value -7 to 7 representing the number of flats (negative) or sharps (positive).</dd>
<dt><strong><code>mode</code></strong> :&ensp;<code>Mode</code></dt>
<dd>A Mode enum, or its case-insensitive string name.</dd>
</dl>
<h2 id="raises">Raises</h2>
<p>A TypeError if signum is not an integer or if mode is not a Mode or string.<br>
A ValueError if the signum integer or the mode string is invalid.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Key:
    &#34;&#34;&#34;
    A key consists of an integer &#39;signum&#39; representing the number of sharps or
    flats in the key&#39;s signature, and a Mode (Enum). Keys can return Pnums
    representing their tonic note and diatonic scale degrees.
    See: https://en.wikipedia.org/wiki/Key_(music)
    &#34;&#34;&#34;

    # Private map of key signature numbers (-7 to 7) to Pitch.pnums
    # representing the tonic notes of the major keys in the cycle of
    # fifths. For example, the signum -1 maps to Pitch.pnum.F, the
    # tonic of F major.
    _tonics = {i-7: v for i, v in enumerate([
        Pitch.pnums.Cf, Pitch.pnums.Gf, Pitch.pnums.Df, Pitch.pnums.Af,
        Pitch.pnums.Ef, Pitch.pnums.Bf, Pitch.pnums.F, Pitch.pnums.C,
        Pitch.pnums.G, Pitch.pnums.D, Pitch.pnums.A, Pitch.pnums.E,
        Pitch.pnums.B, Pitch.pnums.Fs, Pitch.pnums.Cs])}

    # Private map returns a transposition interval for the key&#39;s tonic
    # Pnum. Major is not included because it involves no transposition.
    _transp = {Mode.MINOR: &#39;M6&#39;, Mode.DORIAN: &#39;M2&#39;,
               Mode.PHRYGIAN: &#39;M3&#39;, Mode.LYDIAN: &#39;P4&#39;, Mode.MIXOLYDIAN: &#39;P5&#39;,
               Mode.LOCRIAN: &#39;M7&#39;}

    def __init__(self, signum, mode, staffnum):
        &#34;&#34;&#34;
        Creates a Key from an integer key signature identifier and mode.
        
        Parameters
        ----------
        signum : int
            A value -7 to 7 representing the number of flats (negative) or sharps (positive).
        mode : Mode
            A Mode enum, or its case-insensitive string name.

        Raises 
        ------
        A TypeError if signum is not an integer or if mode is not a Mode or string.&lt;br&gt;
        A ValueError if the signum integer or the mode string is invalid.
        &#34;&#34;&#34;
        if isinstance(signum, int):
            if -7 &lt;= signum &lt;= 7:
                if isinstance(mode, str):
                    m = mode
                    mode = Mode.__dict__.get(m.upper())
                    if mode is None:
                        raise ValueError(f&#34;&#39;{m}&#39; is an invalid mode name.&#34;)
                elif not isinstance(mode, Mode):
                    raise TypeError(f&#39;{signum} is not a Mode or mode name.&#39;)
            else:
                raise ValueError(f&#39;{signum} is not a key signature between -7 and 7.&#39;)
        else:
            raise TypeError(f&#39;{signum} is not a key signature between -7 and 7.&#39;)
        # The the number of flats or sharp, -7 to 7
        self.signum = signum
        # The Mode of the key.
        self.mode = mode
        # The staff number of the key (0=All)
        self.staffnum = staffnum

    def __str__(self):
        &#34;&#34;&#34;
        Returns the print representation of the key.
        &#34;&#34;&#34;
        staff = &#34;all&#34; if self.staffnum == 0 else self.staffnum
        if self.mode:
            # Force tonic pnum to display &#34;#&#34; and &#34;b&#34; as accidental.
            text = self.tonic().name
            text = text.replace(&#39;f&#39;, &#39;b&#39;) if &#39;f&#39; in text else text.replace(&#39;s&#39;, &#39;#&#39;)
            text += f&#39;-{self.mode.name.capitalize()}&#39;
        else:
            text = str(abs(self.signum)) + &#34; &#34;
            if abs(self.signum) &gt; 1: 
                text += &#34;sharps&#34; if self.signum &gt; 0 else &#34;flats&#34;
            elif self.signum == 0: 
                text += &#34;accidentals&#34;
            else: 
                text += &#34;sharp&#34; if self.signum == 1 else &#34;flat&#34;
        return f&#39;&lt;Key: {text} staff={staff}&gt;&#39; # {hex(id(self))}

    # def __repr__(self):
    #     &#34;&#34;&#34;
    #     Returns the external representation of the Key including the
    #     constructor name, signum, and the capitalized version of the
    #     mode&#39;s name.
        
    #     Examples
    #     --------
    #     &#39;Key(4, &#34;Dorian&#34;)&#39;&lt;br&gt;
    #     &#39;Key(-1, &#34;Major&#34;)&#39;
    #     &#34;&#34;&#34;
    #     return f&#39;Key({self.signum}, &#34;{self.mode.name.capitalize()}&#34;)&#39;

    # def string(self):
    #     &#34;&#34;&#34;
    #     Returns a string containing the name of the tonic Pnum, a
    #     hyphen, and the capitalized version of the mode&#39;s name.
    
    #     Examples
    #     --------
    #     &#39;Fs-Dorian&#39;,&lt;br&gt;
    #     &#39;Bf-Phrygian&#39;,&lt;br&gt;
    #     &#39;B-Major&#39;
    #     &#34;&#34;&#34;
    #     return f&#39;{self.tonic().name}-{self.mode.name.capitalize()}&#39;

    def tonic(self):
        &#34;&#34;&#34;
        Returns a Pnum representing the key&#39;s tonic. The tonic can
        be calculated by transposing the Major tonic (Pnum) by the
        interval distance of the mode above the major. The
        transposition can be performed using that interval&#39;s transpose()
        method. The interval distances of Major up to Locrian are:
        P1, M2, M3, P4, P5, M6, M7.
        
        Examples
        --------
        Key(0, &#34;lydian&#34;).tonic() is Pnum F.&lt;br&gt;
        Key(2, &#34;dorian&#34;).tonic() is Pnum E.&lt;br&gt;
        Key(-6, &#34;phrygian&#34;).tonic() is Pnum Bf.&lt;br&gt;
        &#34;&#34;&#34;
        ton = self._tonics[self.signum]
        if self.mode is Mode.MAJOR:
            return ton
        return Interval(self._transp[self.mode]).transpose(ton)

    def scale(self):
        &#34;&#34;&#34;
        Returns a list of Pnums representing the unique pitches of the key&#39;s
        diatonic scale. The octave completion should NOT be included in the list.
        &#34;&#34;&#34;
        steps = [Interval(&#39;M2&#39;), Interval(&#39;M2&#39;), Interval(&#39;m2&#39;),
                 Interval(&#39;M2&#39;), Interval(&#39;M2&#39;), Interval(&#39;M2&#39;),
                 Interval(&#39;m2&#39;)]
        start = self.mode.tonic_degree()
        order = steps[start:] + steps[:start]
        tonic = self.tonic()
        scale = [tonic]
        for s in order[:-1]:
            tonic = s.transpose(tonic)
            scale.append(tonic)
        return scale</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="musx.mxml.key.Key.__init__"><code class="name flex">
<span>def <span class="ident">__init__</span></span>(<span>self, signum, mode, staffnum)</span>
</code></dt>
<dd>
<div class="desc"><p>Creates a Key from an integer key signature identifier and mode.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>signum</code></strong> :&ensp;<code>int</code></dt>
<dd>A value -7 to 7 representing the number of flats (negative) or sharps (positive).</dd>
<dt><strong><code>mode</code></strong> :&ensp;<code>Mode</code></dt>
<dd>A Mode enum, or its case-insensitive string name.</dd>
</dl>
<h2 id="raises">Raises</h2>
<p>A TypeError if signum is not an integer or if mode is not a Mode or string.<br>
A ValueError if the signum integer or the mode string is invalid.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def __init__(self, signum, mode, staffnum):
    &#34;&#34;&#34;
    Creates a Key from an integer key signature identifier and mode.
    
    Parameters
    ----------
    signum : int
        A value -7 to 7 representing the number of flats (negative) or sharps (positive).
    mode : Mode
        A Mode enum, or its case-insensitive string name.

    Raises 
    ------
    A TypeError if signum is not an integer or if mode is not a Mode or string.&lt;br&gt;
    A ValueError if the signum integer or the mode string is invalid.
    &#34;&#34;&#34;
    if isinstance(signum, int):
        if -7 &lt;= signum &lt;= 7:
            if isinstance(mode, str):
                m = mode
                mode = Mode.__dict__.get(m.upper())
                if mode is None:
                    raise ValueError(f&#34;&#39;{m}&#39; is an invalid mode name.&#34;)
            elif not isinstance(mode, Mode):
                raise TypeError(f&#39;{signum} is not a Mode or mode name.&#39;)
        else:
            raise ValueError(f&#39;{signum} is not a key signature between -7 and 7.&#39;)
    else:
        raise TypeError(f&#39;{signum} is not a key signature between -7 and 7.&#39;)
    # The the number of flats or sharp, -7 to 7
    self.signum = signum
    # The Mode of the key.
    self.mode = mode
    # The staff number of the key (0=All)
    self.staffnum = staffnum</code></pre>
</details>
</dd>
<dt id="musx.mxml.key.Key.__str__"><code class="name flex">
<span>def <span class="ident">__str__</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the print representation of the key.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def __str__(self):
    &#34;&#34;&#34;
    Returns the print representation of the key.
    &#34;&#34;&#34;
    staff = &#34;all&#34; if self.staffnum == 0 else self.staffnum
    if self.mode:
        # Force tonic pnum to display &#34;#&#34; and &#34;b&#34; as accidental.
        text = self.tonic().name
        text = text.replace(&#39;f&#39;, &#39;b&#39;) if &#39;f&#39; in text else text.replace(&#39;s&#39;, &#39;#&#39;)
        text += f&#39;-{self.mode.name.capitalize()}&#39;
    else:
        text = str(abs(self.signum)) + &#34; &#34;
        if abs(self.signum) &gt; 1: 
            text += &#34;sharps&#34; if self.signum &gt; 0 else &#34;flats&#34;
        elif self.signum == 0: 
            text += &#34;accidentals&#34;
        else: 
            text += &#34;sharp&#34; if self.signum == 1 else &#34;flat&#34;
    return f&#39;&lt;Key: {text} staff={staff}&gt;&#39; # {hex(id(self))}</code></pre>
</details>
</dd>
<dt id="musx.mxml.key.Key.scale"><code class="name flex">
<span>def <span class="ident">scale</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Returns a list of Pnums representing the unique pitches of the key's
diatonic scale. The octave completion should NOT be included in the list.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def scale(self):
    &#34;&#34;&#34;
    Returns a list of Pnums representing the unique pitches of the key&#39;s
    diatonic scale. The octave completion should NOT be included in the list.
    &#34;&#34;&#34;
    steps = [Interval(&#39;M2&#39;), Interval(&#39;M2&#39;), Interval(&#39;m2&#39;),
             Interval(&#39;M2&#39;), Interval(&#39;M2&#39;), Interval(&#39;M2&#39;),
             Interval(&#39;m2&#39;)]
    start = self.mode.tonic_degree()
    order = steps[start:] + steps[:start]
    tonic = self.tonic()
    scale = [tonic]
    for s in order[:-1]:
        tonic = s.transpose(tonic)
        scale.append(tonic)
    return scale</code></pre>
</details>
</dd>
<dt id="musx.mxml.key.Key.tonic"><code class="name flex">
<span>def <span class="ident">tonic</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Returns a Pnum representing the key's tonic. The tonic can
be calculated by transposing the Major tonic (Pnum) by the
interval distance of the mode above the major. The
transposition can be performed using that interval's transpose()
method. The interval distances of Major up to Locrian are:
P1, M2, M3, P4, P5, M6, M7.</p>
<h2 id="examples">Examples</h2>
<p>Key(0, "lydian").tonic() is Pnum F.<br>
Key(2, "dorian").tonic() is Pnum E.<br>
Key(-6, "phrygian").tonic() is Pnum Bf.<br></p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def tonic(self):
    &#34;&#34;&#34;
    Returns a Pnum representing the key&#39;s tonic. The tonic can
    be calculated by transposing the Major tonic (Pnum) by the
    interval distance of the mode above the major. The
    transposition can be performed using that interval&#39;s transpose()
    method. The interval distances of Major up to Locrian are:
    P1, M2, M3, P4, P5, M6, M7.
    
    Examples
    --------
    Key(0, &#34;lydian&#34;).tonic() is Pnum F.&lt;br&gt;
    Key(2, &#34;dorian&#34;).tonic() is Pnum E.&lt;br&gt;
    Key(-6, &#34;phrygian&#34;).tonic() is Pnum Bf.&lt;br&gt;
    &#34;&#34;&#34;
    ton = self._tonics[self.signum]
    if self.mode is Mode.MAJOR:
        return ton
    return Interval(self._transp[self.mode]).transpose(ton)</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="musx.mxml" href="index.html">musx.mxml</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="musx.mxml.key.Key" href="#musx.mxml.key.Key">Key</a></code></h4>
<ul class="">
<li><code><a title="musx.mxml.key.Key.__init__" href="#musx.mxml.key.Key.__init__">__init__</a></code></li>
<li><code><a title="musx.mxml.key.Key.__str__" href="#musx.mxml.key.Key.__str__">__str__</a></code></li>
<li><code><a title="musx.mxml.key.Key.scale" href="#musx.mxml.key.Key.scale">scale</a></code></li>
<li><code><a title="musx.mxml.key.Key.tonic" href="#musx.mxml.key.Key.tonic">tonic</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>